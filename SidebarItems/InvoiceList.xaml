<UserControl x:Class="ClinicManagement.SidebarItems.InvoiceList"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:conv="clr-namespace:ClinicManagement.Converters"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ClinicManagement.SidebarItems"
                         xmlns:Icon="http://metro.mahapps.com/winfx/xaml/iconpacks"
             mc:Ignorable="d" 
                          d:DesignHeight="724.04" d:DesignWidth="1030">
    <UserControl.Resources>
        <conv:SearchHintVisibilityConverter x:Key="SearchHintVisibilityConverter"/>
    </UserControl.Resources>
    <!--Top Section-->
    <Grid Grid.Column="2"
      Grid.ColumnSpan="2"
     >
        <Grid.Background>
            <LinearGradientBrush StartPoint="1, 0" EndPoint="0, 1">
                <GradientStop Color="White" Offset="0"/>
                <GradientStop Color="Silver" Offset="1"/>

            </LinearGradientBrush>
        </Grid.Background>


        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Phần tìm kiếm -->
            <RowDefinition Height="*"/>
            <!-- DataGrid chiếm phần còn lại -->
        </Grid.RowDefinitions>

        <!-- Search Box -->
        <Grid Grid.Row="0" Width="500" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0">
            <ComboBox x:Name="searchCategoryComboBox" Style="{DynamicResource ComboBoxStyle1}" HorizontalAlignment="Left" Panel.ZIndex="2" Margin="20,0,0,0">
                <ComboBoxItem Content="Tất cả" IsSelected="True"/>
                <ComboBoxItem Content="Mã hóa đơn"/>
                <ComboBoxItem Content="Mã phiếu khám"/>
                <ComboBoxItem Content="Mã nhân viên"/>
            </ComboBox>

            <Rectangle Width="1"  Panel.ZIndex="2" HorizontalAlignment="Left"/>

            <TextBlock Margin="163 0 20 0"
           VerticalAlignment="Center"
           Foreground="#868686"
           IsHitTestVisible="False"
           Panel.ZIndex="1"
           Text="Search here ...">
                <TextBlock.Visibility>
                    <MultiBinding Converter="{StaticResource SearchHintVisibilityConverter}">
                        <Binding ElementName="textBoxSearch" Path="Text"/>
                        <Binding ElementName="textBoxSearch" Path="IsFocused"/>
                    </MultiBinding>
                </TextBlock.Visibility>
            </TextBlock>



            <TextBox Name="textBoxSearch" TextChanged="textBoxSearch_TextChanged" Style="{StaticResource searchTextbox}" Margin="10,10,0,10"/>

            <Button Style="{StaticResource textBoxButton}" HorizontalAlignment="Right" Margin="0 0 7 0">
                <Icon:PackIconMaterial Kind="Magnify" Width="15" Foreground="#c7c7c7"/>
            </Button>


        </Grid>
        

        <!-- DataGrid -->
        <DataGrid Grid.Row="1" x:Name="billDataGrid" Margin="10"
          AutoGenerateColumns="False"
          IsReadOnly="True"
          RowHeight="45"
          HeadersVisibility="Column"
          ColumnHeaderHeight="50"
          CanUserAddRows="False"
          BorderThickness="0"
          Background="White"
          HorizontalGridLinesBrush="Transparent"
          VerticalGridLinesBrush="Transparent"
          RowBackground="White"
          AlternatingRowBackground="#F8F8F8"
                  
          >

            <DataGrid.Columns>
                <DataGridTextColumn Header="Mã HĐ" Binding="{Binding MaHoaDon}" Width="80"/>
                <DataGridTextColumn Header="Mã phiếu khám" Binding="{Binding MaPhieuKham}" Width="120"/>
                <DataGridTextColumn Header="Mã nhân viên" Binding="{Binding MaNhanVien}" Width="120"/>
                <DataGridTextColumn Header="Ngày lập hóa đơn" Binding="{Binding NgayLap, StringFormat='dd/MM/yyyy'}" Width="120"/>
                <DataGridTextColumn Header="Tiền khám" Binding="{Binding TienKham, StringFormat=N0}" Width="100"/>
                <DataGridTextColumn Header="Tiền thuốc" Binding="{Binding TienThuoc, StringFormat=N0}" Width="100"/>
                <DataGridTextColumn Header="Tổng tiền" Binding="{Binding TongTien, StringFormat=N0}" Width="120"/>

                <!-- Cột Sửa -->
                <DataGridTemplateColumn Header="Sửa" Width="80">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Width="50" Height="25" Cursor="Hand">
                                <Button.Template>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="#4FC3F7"
                CornerRadius="5"
                BorderThickness="0"
                BorderBrush="Transparent">
                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Button.Template>
                                <Button.Content>
                                    <Icon:PackIconMaterial Kind="Pencil"
                           Foreground="White"
                           Width="18" Height="18"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"/>
                                </Button.Content>
                            </Button>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn Header="Xóa" Width="80">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Width="50" Height="25" Cursor="Hand">
                                <Button.Template>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="#E53935"
                                CornerRadius="5"
                                BorderThickness="0"
                                BorderBrush="Transparent">
                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Button.Template>
                                <Button.Content>
                                    <Icon:PackIconMaterial Kind="Delete"
                                           Foreground="White"
                                           Width="18" Height="18"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"/>
                                </Button.Content>
                            </Button>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>



            </DataGrid.Columns>


        </DataGrid>

    </Grid>

</UserControl>

