<UserControl x:Class="ClinicManagement.SidebarItems.ReceiptList"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:conv="clr-namespace:ClinicManagement.Converters"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
            xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
            xmlns:local="clr-namespace:ClinicManagement.SidebarItems"
            xmlns:Icon="http://metro.mahapps.com/winfx/xaml/iconpacks"
            
             mc:Ignorable="d" 
             d:DesignHeight="730" d:DesignWidth="1030">
    <UserControl.Resources>
        <conv:SearchHintVisibilityConverter x:Key="SearchHintVisibilityConverter"/>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Bộ lọc tìm kiếm -->
        <Grid Grid.Row="0" Height="60" Margin="10,10,10,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="140"/>
                <ColumnDefinition Width="1*"/>
                <ColumnDefinition Width="180"/>
                <ColumnDefinition Width="110"/>
            </Grid.ColumnDefinitions>

            <!-- Search TextBox với Hint -->
            <Grid Grid.ColumnSpan="2" Margin="24,0,0,0">
                <TextBox x:Name="textBoxSearch"
                     TextChanged="textBoxSearch_TextChanged"
                     Style="{StaticResource searchTextbox}"
                     VerticalContentAlignment="Center"
                     FontSize="14"
                     Padding="10,0"
                     Height="35"/>
                <TextBlock Text="Search here ..."
                       Foreground="#868686"
                       VerticalAlignment="Center"
                       Margin="12,0,0,0"
                       IsHitTestVisible="False"
                       FontSize="14">
                    <TextBlock.Visibility>
                        <MultiBinding Converter="{StaticResource SearchHintVisibilityConverter}">
                            <Binding ElementName="textBoxSearch" Path="Text"/>
                            <Binding ElementName="textBoxSearch" Path="IsFocused"/>
                        </MultiBinding>
                    </TextBlock.Visibility>
                </TextBlock>
            </Grid>

            <!-- Nút tìm kiếm -->
            <Button Content="Tìm kiếm"
    Grid.Column="2"
    Width="100"
    Height="35"
    Background="#3f51b5"
    Foreground="White"
    FontWeight="Bold"
    Click="OnSearchButtonClick"
    HorizontalAlignment="Left"
    VerticalAlignment="Center"
    Margin="10,0,0,0"/>

            <!-- Nút tìm kiếm -->
            <Button Content="Thêm phiếu"
                Grid.Column="2"
                Width="114"
                Height="36"
                Background="#3f51b5"
                Foreground="White"
                FontWeight="Bold"
                Click="AddClick"
                HorizontalAlignment="Left"
                VerticalAlignment="Center"
                Margin="156,0,0,0" Grid.ColumnSpan="2"/>
        </Grid>

        <!-- DataGrid -->
        <DataGrid Grid.Row="1"
              x:Name="billDataGrid"
              Margin="10"
              AutoGenerateColumns="False"
              IsReadOnly="True"
              RowHeight="45"
              HeadersVisibility="Column"
              ColumnHeaderHeight="50"
              CanUserAddRows="False"
              BorderThickness="0"
              Background="White"
              HorizontalGridLinesBrush="Transparent"
              VerticalGridLinesBrush="Transparent"
              RowBackground="White"
              AlternatingRowBackground="#F8F8F8">

            <DataGrid.Columns>
                <DataGridTextColumn Header="Mã phiếu nhập" Binding="{Binding MaHoaDon}" Width="*"/>
                <DataGridTextColumn Header="Ngày nhập" Binding="{Binding NgayLap, StringFormat='dd/MM/yyyy'}" Width="*"/>
                <DataGridTextColumn Header="Tổng tiền" Binding="{Binding TongTien, StringFormat=N0}" Width="*"/>

                <!-- Cột Sửa -->
                <DataGridTemplateColumn Header="Xem chi tiết" Width="150">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Width="50" Height="25" Cursor="Hand" Click="EditButton_Click">
                                <Button.Template>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="#4FC3F7"
                                            CornerRadius="5"
                                            BorderThickness="0"
                                            BorderBrush="Transparent">
                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Button.Template>
                                <Button.Content>
                                    <Icon:PackIconMaterial Kind="Pencil"
                                                       Foreground="White"
                                                       Width="18" Height="18"
                                                       HorizontalAlignment="Center"
                                                       VerticalAlignment="Center"/>
                                </Button.Content>
                            </Button>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!-- Cột Xóa -->
                <!--
                <DataGridTemplateColumn Header="Xóa" Width="80">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Width="50" Height="25" Cursor="Hand" Click="DeleteBill_Click">
                                <Button.Template>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="#E53935"
                                            CornerRadius="5"
                                            BorderThickness="0"
                                            BorderBrush="Transparent">
                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Button.Template>
                                <Button.Content>
                                    <Icon:PackIconMaterial Kind="Delete"
                                                       Foreground="White"
                                                       Width="18" Height="18"
                                                       HorizontalAlignment="Center"
                                                       VerticalAlignment="Center"/>
                                </Button.Content>
                            </Button>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>-->
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</UserControl>
