<UserControl x:Class="ClinicManagement.SidebarItems.DrugView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ClinicManagement.SidebarItems"
             mc:Ignorable="d" 
              xmlns:Icon="http://metro.mahapps.com/winfx/xaml/iconpacks"
              xmlns:fa="http://schemas.awesome.incremented/wpf/xaml/fontawesome.sharp"
             xmlns:lvc="clr-namespace:LiveCharts.Wpf;assembly=LiveCharts.Wpf" 
             d:DesignHeight="724.04" d:DesignWidth="1030">
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisConverter" />
    </UserControl.Resources>
    <!--Top Section-->

    <Grid Background="Transparent" Grid.Column="2" Grid.ColumnSpan="2">
        <!-- Main section -->
        <Border x:Name="borderMainContent" CornerRadius="20" >
            <Border.Background>
                <LinearGradientBrush StartPoint="1, 0" EndPoint="0, 1">
                    <GradientStop Color="White" Offset="0"/>
                    <GradientStop Color="Silver" Offset="1.5"/>
                </LinearGradientBrush>
            </Border.Background>

            <Grid>
                <!-- Chia làm 3 hàng -->
                <Grid.RowDefinitions>
                    <!-- Hàng 1: Tìm kiếm và các nút -->
                    <RowDefinition Height="66"/>
                    <!-- Hàng 2: Bảng thuốc -->
                    <RowDefinition Height="*"/>
                   
                </Grid.RowDefinitions>

                <!-- Chia làm 2 cột -->
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition Width="370" />
                </Grid.ColumnDefinitions>


                <!-- Search Box -->
                <Grid Width="315" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="10,0,0,0">
                    <ComboBox Name="searchComboBox" Style="{DynamicResource ComboBoxStyle1}" HorizontalAlignment="Left" Panel.ZIndex="2" Margin="10,10,0,11" Height="45" Width="105">
                        <ComboBoxItem Content="Tên thuốc" IsSelected="True"/>
                        <ComboBoxItem Content="Thành phần"/>
                        <ComboBoxItem Content="Hạn sử dụng"/>
                    </ComboBox>

                    <Rectangle Width="1"  Panel.ZIndex="2" HorizontalAlignment="Left"/>

                    <TextBlock Margin="120,0,42,0"
                   VerticalAlignment="Center"
                   Foreground="#868686"
                   IsHitTestVisible="False"
                   Panel.ZIndex="1"
                   Text="Tìm kiếm ..."
                   Visibility="{Binding ElementName=textBoxSearch, Path=Text.IsEmpty, Converter={StaticResource BoolToVisConverter}}"/>

                    <TextBox Name="textBoxSearch" Style="{StaticResource searchTextbox}" Margin="10,10,0,10"/>

                    <Button Content="🔎" FontSize="16" Style="{StaticResource textBoxButton}" HorizontalAlignment="Right" Margin="0 0 7 0" Click="SearchDrugButton_Click">
                    </Button>
                </Grid>

                <Button Content="🔄️"
        Style="{StaticResource topMenuButton}"
        FontSize="16"
        Click="ReloadBtn_Click"
        HorizontalAlignment="Left"
        Margin="330,18,0,18"
        Width="30" />
<!--
                <StackPanel Orientation="Horizontal" Margin="365,10,30,10">

                    <ComboBox x:Name="monthComboBox" HorizontalAlignment="Center" Height="35" VerticalAlignment="Center" SelectionChanged="MonthCombobox_SelectionChanged" Width="120" Margin="0,0,10,0" Style="{StaticResource ComboBoxStyle1}" />
                    <ComboBox x:Name="yearComboBox" Width="120" Height="35" HorizontalAlignment="Center" VerticalAlignment="Center" SelectionChanged="YearCombobox_SelectionChanged" Style="{StaticResource ComboBoxStyle1}"/>
                </StackPanel>
                -->

                <StackPanel Orientation="Horizontal" VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0 0 30 25" Grid.Column="1">

                    <Button Content="➕ Thêm"
        Style="{StaticResource topMenuButton}"
        Click="AddDrugButton_Click" Width="75" />
                    <Button Content="❌ Xóa"
Style="{StaticResource topMenuButton}"
Click="DeleteDrugButton_Click" Width="75" />
                    <Button Content="🔧 Sửa"
Style="{StaticResource topMenuButton}"
Click="EditDrugButton_Click"
                            DataContext="{Binding}" Width="75"/>
                    <Button Content="👁️ Chi tiết"
Style="{StaticResource topMenuButton}"
Click="DetailDrugButton_Click" Width="75" />
                </StackPanel>
<!--
                <StackPanel Grid.Column="0" Orientation="Vertical" Grid.Row="1" Margin="0,0,485,0">
                    <Border Background="#ffffff" Width="165" CornerRadius="15" Margin="20,0,0,10" Height="94" HorizontalAlignment="Left">
                        <StackPanel Margin="10,0,10,0" Height="84">
                            <TextBlock FontWeight="SemiBold" FontSize="25" Text="🏥 Đã bán" Foreground="#29A3EC"/>
                            <Border Background="#FF98D2F8" Padding="4,2" CornerRadius="8" Opacity="0.8"
                    MinWidth="40" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="10,23,0,0">
                                <TextBlock x:Name="daBanTextBlock" Text="20" Foreground="#29A3EC" FontSize="14" FontWeight="Bold" TextAlignment="Center"/>
                            </Border>
                        </StackPanel>
                    </Border>

                    <Border Background="#ffffff" Width="165" CornerRadius="15" Height="94" HorizontalAlignment="Left" Margin="20,0,0,0">
                        <StackPanel Margin="10,0,10,0" Height="84">
                            <TextBlock FontWeight="SemiBold" FontSize="25" Text="🏥 Tồn kho" Foreground="#E44D42"/>
                            <Border Background="#FFFCB6B6" Margin="10,23,0,0" Padding="4,2" CornerRadius="8" Opacity="0.8"
                    MinWidth="40" HorizontalAlignment="Left" VerticalAlignment="Bottom">
                                <TextBlock x:Name="tonKhoTextBlock" Text="30" Foreground="#E44D42" FontSize="14" FontWeight="Bold" TextAlignment="Center" />
                            </Border>
                        </StackPanel>
                    </Border>
                </StackPanel>
                -->
                <!--Livechart-->
              <!--
                <Grid Grid.Row="1" Grid.ColumnSpan="2" Margin="200,0,10,0" >
                    <lvc:CartesianChart Series="{Binding SeriesCollection}" LegendLocation="Bottom" >
                        <lvc:CartesianChart.AxisX>
                            <lvc:Axis  Labels="{Binding Labels}"></lvc:Axis>
                        </lvc:CartesianChart.AxisX>
                        <lvc:CartesianChart.AxisY>
                            <lvc:Axis Labels="{Binding Formatter}"></lvc:Axis>
                        </lvc:CartesianChart.AxisY>

                    </lvc:CartesianChart>
                </Grid>
-->
                <!-- DataGrid -->
                <DataGrid Grid.Row="1"  Grid.ColumnSpan="2"
              RowStyle="{DynamicResource DataGridRowStyle1}"
              ColumnHeaderStyle="{DynamicResource DataGridColumnHeaderStyle1}"
              CellStyle="{DynamicResource DataGridCellStyle1}"
              x:Name="drugDataGrid"

              Style="{DynamicResource DataGridStyle1}"
              Margin="10">
                    <!-- Thêm margin để không dính sát -->
                    <DataGrid.Columns>
                        <DataGridCheckBoxColumn   Binding="{Binding IsSelected, Mode=TwoWay}" Header="Chọn" CanUserResize="False" Width="auto" ElementStyle="{StaticResource CheckBoxStyle1}">
                            <DataGridCheckBoxColumn.HeaderTemplate>
                                <DataTemplate>
                                    <CheckBox Style="{StaticResource CheckBoxStyle1}"   />
                                </DataTemplate>
                            </DataGridCheckBoxColumn.HeaderTemplate>
                        </DataGridCheckBoxColumn>

                        <DataGridTextColumn Header="#" IsReadOnly="True" CanUserResize="False" Width="auto" Binding="{Binding ID_Thuoc}"/>
                        <DataGridTemplateColumn Header="Tên thuốc" IsReadOnly="True" Width="*">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <Ellipse Width="35" Height="35" Margin="0 0 10 0">
                                            <Ellipse.Fill>
                                                <ImageBrush ImageSource="{Binding HinhAnh}" Stretch="UniformToFill"/>
                                            </Ellipse.Fill>
                                        </Ellipse>

                                        <!-- Hiển thị tên thuốc -->
                                        <TextBlock Text="{Binding TenThuoc}" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTextColumn Header="Cách dùng" Binding="{Binding CachDung}" IsReadOnly="True" Width="*"/>
                        <DataGridTextColumn Header="Đơn vị" Binding="{Binding TenDVT}" IsReadOnly="True" Width="*"/>
                        <DataGridTextColumn Header="Thành phần" Binding="{Binding ThanhPhan}" IsReadOnly="True" Width="*"/>
                        <DataGridTextColumn Header="Xuât xứ" Binding="{Binding XuatXu}" IsReadOnly="True" Width="*"/>
                        <DataGridTextColumn Header="Số lượng tồn" Binding="{Binding SoLuongTon}" Foreground="#FF5252" IsReadOnly="True" Width="*"/>
                        <DataGridTextColumn Header="Đơn giá nhập" Binding="{Binding DonGiaNhap}" IsReadOnly="True" Width="*"/>
                        <!-- <DataGridTextColumn Header="Hạn sử dụng" Binding="{Binding HanSuDung}" IsReadOnly="True" Width="*"/>-->
                        <DataGridTextColumn Header="Tỷ lệ giá bán" Binding="{Binding TyLeGiaBan}" IsReadOnly="True" Width="*"/>
                        <DataGridTextColumn Header="Đơn giá bán" Binding="{Binding DonGiaBan}" IsReadOnly="True" Width="*"/>

                    </DataGrid.Columns>
                </DataGrid>
                <!-- Xuất thuốc -->

            </Grid>
        </Border>
    </Grid>


</UserControl>

